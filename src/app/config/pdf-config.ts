// Ù…Ù„Ù Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª PDF - src/app/config/pdf-config.ts

export const PDF_CONFIG = {
  // Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
  defaultOptions: {
    title: 'ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ù‡Ø§Ù… - Ø°ÙƒØ±Ù†ÙŠ',
    includeStats: true,
    includeCompletedTasks: true,
    orientation: 'portrait' as const,
    format: 'a4' as const,
    language: 'ar' as const
  },

  // Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ PDF
  colors: {
    primary: [59, 130, 246],      // Ø£Ø²Ø±Ù‚
    success: [34, 197, 94],       // Ø£Ø®Ø¶Ø±
    warning: [249, 115, 22],      // Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ
    danger: [239, 68, 68],        // Ø£Ø­Ù…Ø±
    gray: [107, 114, 128],        // Ø±Ù…Ø§Ø¯ÙŠ
    lightGray: [229, 231, 235],   // Ø±Ù…Ø§Ø¯ÙŠ ÙØ§ØªØ­
    darkGray: [51, 65, 85],       // Ø±Ù…Ø§Ø¯ÙŠ Ø¯Ø§ÙƒÙ†
    white: [255, 255, 255],       // Ø£Ø¨ÙŠØ¶
    black: [0, 0, 0]              // Ø£Ø³ÙˆØ¯
  },

  // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø·ÙˆØ·
  fonts: {
    arabic: {
      family: 'times',
      fallback: 'helvetica'
    },
    english: {
      family: 'helvetica',
      fallback: 'arial'
    },
    sizes: {
      title: 24,
      subtitle: 18,
      heading: 16,
      body: 12,
      small: 10,
      tiny: 9
    }
  },

  // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ®Ø·ÙŠØ·
  layout: {
    margin: 20,
    pageWidth: {
      a4: 210,
      letter: 216
    },
    pageHeight: {
      a4: 297,
      letter: 279
    },
    statBoxHeight: 25,
    taskItemHeight: 30,
    lineSpacing: 6,
    sectionSpacing: 15
  },

  // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
  stats: {
    boxColors: [
      { bg: [59, 130, 246], text: [255, 255, 255], label: 'Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹' },    // Ø£Ø²Ø±Ù‚
      { bg: [34, 197, 94], text: [255, 255, 255], label: 'Ù…ÙƒØªÙ…Ù„Ø©' },     // Ø£Ø®Ø¶Ø±
      { bg: [249, 115, 22], text: [255, 255, 255], label: 'Ù…Ø¹Ù„Ù‚Ø©' },     // Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ
      { bg: [239, 68, 68], text: [255, 255, 255], label: 'Ù…ØªØ£Ø®Ø±Ø©' }      // Ø£Ø­Ù…Ø±
    ],
    boxSpacing: 10,
    valueTextSize: 20,
    labelTextSize: 10
  },

  // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù‡Ø§Ù…
  taskStatus: {
    completed: {
      color: [34, 197, 94],
      icon: 'âœ“',
      text: 'Ù…ÙƒØªÙ…Ù„Ø©'
    },
    pending: {
      color: [249, 115, 22],
      icon: 'â—‹',
      text: 'Ù…Ø¹Ù„Ù‚Ø©'
    },
    overdue: {
      color: [239, 68, 68],
      icon: 'âš ',
      text: 'Ù…ØªØ£Ø®Ø±Ø©'
    }
  },

  // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
  priority: {
    high: {
      color: [239, 68, 68],
      icon: 'ğŸ”´',
      text: 'Ø¹Ø§Ù„ÙŠØ©'
    },
    medium: {
      color: [249, 115, 22],
      icon: 'ğŸŸ¡',
      text: 'Ù…ØªÙˆØ³Ø·Ø©'
    },
    low: {
      color: [34, 197, 94],
      icon: 'ğŸŸ¢',
      text: 'Ù…Ù†Ø®ÙØ¶Ø©'
    }
  },

  // Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ù…ØªØ±Ø¬Ù…Ø©
  texts: {
    ar: {
      reportTitle: 'ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ù‡Ø§Ù… - Ø°ÙƒØ±Ù†ÙŠ',
      detailedReport: 'ØªÙ‚Ø±ÙŠØ± Ù…ÙØµÙ„ - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù…',
      quickStats: 'Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©',
      reportDate: 'ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø±ÙŠØ±',
      tasksList: 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…',
      taskDetails: 'ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù…',
      priorityAnalysis: 'ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ù‡Ø§Ù… Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©',
      statusAnalysis: 'ØªØ­Ù„ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù‡Ø§Ù…',
      footer: 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© ØªØ·Ø¨ÙŠÙ‚ Ø°ÙƒØ±Ù†ÙŠ',
      pageText: 'ØµÙØ­Ø©',
      taskCount: 'Ù…Ù‡Ù…Ø©',
      totalTasks: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù‡Ø§Ù…',
      completedTasks: 'Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©',
      pendingTasks: 'Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©',
      overdueTasks: 'Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ØªØ£Ø®Ø±Ø©',
      completionRate: 'Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²',
      noDate: 'Ø¨Ø¯ÙˆÙ† ØªØ§Ø±ÙŠØ®',
      notSpecified: 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',
      status: 'Ø§Ù„Ø­Ø§Ù„Ø©',
      priority: 'Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©',
      dueDate: 'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚',
      createdDate: 'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡',
      highPriority: 'Ø£ÙˆÙ„ÙˆÙŠØ© Ø¹Ø§Ù„ÙŠØ©',
      mediumPriority: 'Ø£ÙˆÙ„ÙˆÙŠØ© Ù…ØªÙˆØ³Ø·Ø©',
      lowPriority: 'Ø£ÙˆÙ„ÙˆÙŠØ© Ù…Ù†Ø®ÙØ¶Ø©'
    },
    en: {
      reportTitle: 'Tasks Report - Zakkerni',
      detailedReport: 'Detailed Report - Task Management',
      quickStats: 'Quick Statistics',
      reportDate: 'Report Date',
      tasksList: 'Tasks List',
      taskDetails: 'Task Details',
      priorityAnalysis: 'Task Distribution by Priority',
      statusAnalysis: 'Task Status Analysis',
      footer: 'Generated by Zakkerni App',
      pageText: 'Page',
      taskCount: 'tasks',
      totalTasks: 'Total Tasks',
      completedTasks: 'Completed Tasks',
      pendingTasks: 'Pending Tasks',
      overdueTasks: 'Overdue Tasks',
      completionRate: 'Completion Rate',
      noDate: 'No Date',
      notSpecified: 'Not Specified',
      status: 'Status',
      priority: 'Priority',
      dueDate: 'Due Date',
      createdDate: 'Created Date',
      highPriority: 'High Priority',
      mediumPriority: 'Medium Priority',
      lowPriority: 'Low Priority'
    }
  },

  // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØµØ¯ÙŠØ±
  export: {
    fileNamePrefix: {
      ar: 'ØªÙ‚Ø±ÙŠØ±_Ø§Ù„Ù…Ù‡Ø§Ù…',
      en: 'tasks_report'
    },
    detailedFileNamePrefix: {
      ar: 'ØªÙ‚Ø±ÙŠØ±_Ù…ÙØµÙ„',
      en: 'detailed_report'
    },
    dateFormat: {
      ar: 'ar-SA',
      en: 'en-US'
    }
  },

  // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¶ØºØ· ÙˆØ§Ù„Ø¬ÙˆØ¯Ø©
  quality: {
    imageScale: 2,           // Ø¯Ù‚Ø© Ø§Ù„ØµÙˆØ±
    compressionLevel: 0.8,   // Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¶ØºØ·
    maxDescriptionLength: 80, // Ø£Ù‚ØµÙ‰ Ø·ÙˆÙ„ Ù„Ù„ÙˆØµÙ
    maxTasksPerPage: 15      // Ø£Ù‚ØµÙ‰ Ø¹Ø¯Ø¯ Ù…Ù‡Ø§Ù… ÙÙŠ Ø§Ù„ØµÙØ­Ø©
  },

  // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©
  advanced: {
    rtlSupport: true,        // Ø¯Ø¹Ù… Ø§Ù„ÙƒØªØ§Ø¨Ø© Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ù„Ù„ÙŠØ³Ø§Ø±
    enablePageNumbers: true, // ØªÙØ¹ÙŠÙ„ Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØµÙØ­Ø§Øª
    enableFooter: true,      // ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ°ÙŠÙŠÙ„
    enableHeader: false,     // ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ±ÙˆÙŠØ³Ø©
    borderRadius: 3,         // Ù†ØµÙ Ù‚Ø·Ø± Ø§Ù„Ø­ÙˆØ§Ù
    lineWidth: 0.5,          // Ø³Ù…Ùƒ Ø§Ù„Ø®Ø·ÙˆØ·
    enableShadows: false,    // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¸Ù„Ø§Ù„ (ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… ÙÙŠ jsPDF Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ)
    enableGradients: false   // ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ¯Ø±Ø¬Ø§Øª (ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… ÙÙŠ jsPDF Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ)
  }
};

// Ø¯Ø§Ù„Ø§Øª Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
export class PdfConfigHelper {
  
  /**
   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù†Øµ Ù…ØªØ±Ø¬Ù…
   */
  static getText(key: string, language: 'ar' | 'en' = 'ar'): string {
    return PDF_CONFIG.texts[language][key as keyof typeof PDF_CONFIG.texts.ar] || key;
  }

  /**
   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù„ÙˆÙ† Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
   */
  static getColor(type: keyof typeof PDF_CONFIG.colors): [number, number, number] {
    return PDF_CONFIG.colors[type] as [number, number, number];
  }

  /**
   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù‡Ù…Ø©
   */
  static getTaskStatusConfig(completed: boolean, overdue: boolean) {
    if (completed) {
      return PDF_CONFIG.taskStatus.completed;
    } else if (overdue) {
      return PDF_CONFIG.taskStatus.overdue;
    } else {
      return PDF_CONFIG.taskStatus.pending;
    }
  }

  /**
   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
   */
  static getPriorityConfig(priority: 'high' | 'medium' | 'low') {
    return PDF_CONFIG.priority[priority] || PDF_CONFIG.priority.low;
  }

  /**
   * Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù
   */
  static getFileName(isDetailed: boolean = false, language: 'ar' | 'en' = 'ar'): string {
    const prefix = isDetailed 
      ? PDF_CONFIG.export.detailedFileNamePrefix[language]
      : PDF_CONFIG.export.fileNamePrefix[language];
    
    const date = new Date().toISOString().split('T')[0];
    return `${prefix}_${date}.pdf`;
  }

  /**
   * ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø­Ø³Ø¨ Ø§Ù„Ù„ØºØ©
   */
  static formatDate(date: Date | string, language: 'ar' | 'en' = 'ar'): string {
    const dateObj = date instanceof Date ? date : new Date(date);
    const locale = PDF_CONFIG.export.dateFormat[language];
    
    if (language === 'ar') {
      return dateObj.toLocaleDateString(locale, {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });
    } else {
      return dateObj.toLocaleDateString(locale, {
        year: 'numeric',
        month: 'short',
        day: 'numeric'
      });
    }
  }

  /**
   * Ø­Ø³Ø§Ø¨ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
   */
  static getContentWidth(format: 'a4' | 'letter' = 'a4'): number {
    const pageWidth = PDF_CONFIG.layout.pageWidth[format];
    return pageWidth - (PDF_CONFIG.layout.margin * 2);
  }

  /**
   * Ø­Ø³Ø§Ø¨ Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
   */
  static getContentHeight(format: 'a4' | 'letter' = 'a4'): number {
    const pageHeight = PDF_CONFIG.layout.pageHeight[format];
    return pageHeight - (PDF_CONFIG.layout.margin * 2);
  }

  /**
   * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø§Ø¬Ø© Ù„ØµÙØ­Ø© Ø¬Ø¯ÙŠØ¯Ø©
   */
  static needsNewPage(currentY: number, requiredSpace: number, format: 'a4' | 'letter' = 'a4'): boolean {
    const maxY = PDF_CONFIG.layout.pageHeight[format] - PDF_CONFIG.layout.margin - 30; // 30 Ù„Ù„ØªØ°ÙŠÙŠÙ„
    return (currentY + requiredSpace) > maxY;
  }
}

// ØªØµØ¯ÙŠØ± Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ Ø£Ù…Ø§ÙƒÙ† Ø£Ø®Ø±Ù‰
export type PdfLanguage = 'ar' | 'en';
export type PdfFormat = 'a4' | 'letter';
export type PdfOrientation = 'portrait' | 'landscape';
export type TaskPriority = 'high' | 'medium' | 'low';
export type ColorType = keyof typeof PDF_CONFIG.colors;